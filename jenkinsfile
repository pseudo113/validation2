pipeline {
    agent any
    tools {
        maven "Maven 3.3.3"
    }
    environment {
        // This can be nexus3 or nexus2
        NEXUS_VERSION = "nexus2"
        // This can be http or https
        NEXUS_PROTOCOL = "https"
        // Where your Nexus is running
        NEXUS_URL = "127.0.0.1:8081/nexus"
        // Repository where we will upload the artifact
        NEXUS_REPOSITORY = "releases"
        // Jenkins credential id to authenticate to Nexus OSS
        NEXUS_CREDENTIAL_ID = "nexus-credentials"
    }
   
   
        stages {
    	stage('Checkout') {
            steps {
                git 'https://github.com/pseudo113/nada1.git'
            }
        }


        stage('Build') {
            steps {
                //bat label: '', script: 'mvn install'
		bat(/${MAVEN_HOME}\bin\mvn -Dmaven.test.failure.ignore 
clean package /), script: 'mvn install'
            }
        
        stage('Test') {
            steps {
                bat label: '', script: 'mvn test'
            }
        }
        


        stage("publish to nexus") {
            steps {
                script {
                    // Read POM xml file using 'readMavenPom' step , 
this step 'readMavenPom' is included in: 
https://plugins.jenkins.io/pipeline-utility-steps
                    pom = readMavenPom file: "pom.xml";
                    // Find built artifact under target folder
                    filesByGlob = findFiles(glob: 
"target/*.${pom.packaging}");
                    // Print some info from the artifact found
   
